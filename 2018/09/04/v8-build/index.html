<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Node.js Golang DevOps"><title>Google v8 æºç ç¼–è¯‘ | Ryan's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Google v8 æºç ç¼–è¯‘</h1><a id="logo" href="/.">Ryan's Blog</a><p class="description">Whole life learning</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Google v8 æºç ç¼–è¯‘</h1><div class="post-meta">Sep 4, 2018</div><a class="disqus-comment-count" data-disqus-identifier="2018/09/04/v8-build/" href="/2018/09/04/v8-build/#disqus_thread"></a><div class="post-content"><p>æƒ³æ·±å…¥å­¦ä¹  Node.js ç»•ä¸å¼€ v8ï¼Œè¦å­¦ä¹  v8 é‚£åªèƒ½ä»ç¼–è¯‘å®ƒå¼€å§‹äº†ã€‚æˆ‘æ˜¯åœ¨ mac ç¯å¢ƒä¸‹ç¼–è¯‘çš„ï¼Œä»¥ä¸‹å¤§éƒ¨åˆ†å‘½ä»¤éƒ½éœ€è¦åœ¨ç¿»å¢™çŠ¶æ€ä¸‹å®ŒæˆğŸ˜£ã€‚</p>
<ol>
<li><p>ä¸‹è½½å·¥å…· depot_tools</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=`pwd`/depot_tools:"$PATH"</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ£€æŸ¥å¹¶æ›´æ–°å·¥å…·</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gclient</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾ä¸€ä¸ªä½ è¦ä¸‹è½½ v8 æºç çš„ç›®å½•è¿›å»åæ‰§è¡Œä¸‹é¢æ“ä½œï¼Œæ—¶é—´ä¼šæœ‰ç‚¹é•¿</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fetch v8</span><br><span class="line">cd v8</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¡®è®¤ä½ åœ¨ v8 æºç ç›®å½•ä¸­ï¼Œé€šè¿‡ä¸‹é¢å‘½ä»¤ä¸‹è½½æ‰€æœ‰æ„å»ºä¾èµ–é¡¹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gclient sync</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä»…åœ¨ Linux ç¯å¢ƒä¸‹</strong>éœ€è¦æ­¤æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build/install-build-deps.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”Ÿæˆæ„å»ºæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools/dev/v8gen.py x64.release</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®ç¼–è¯‘å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦åµŒå…¥ v8 ï¼Œéœ€è¦ç”Ÿæˆé™æ€åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gn args out.gn/x64.release</span><br><span class="line"></span><br><span class="line">å°†ä¸‹é¢è®¾ç½®åŠ å…¥é…ç½®ä¸­</span><br><span class="line">is_component_build = false</span><br><span class="line">v8_static_library = true</span><br><span class="line">use_custom_libcxx = false</span><br><span class="line">use_custom_libcxx_for_host = false</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘æºç </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ninja -C out.gn/x64.release</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘å®Œæˆåï¼Œåœ¨ out.gn/x64.release ç›®å½•ä¸‹æŸ¥çœ‹ç¼–è¯‘äº§ç”Ÿçš„äºŒè¿›åˆ¶æ–‡ä»¶åŠé™æ€åº“</p>
<p>æˆ‘ä»¬éœ€è¦ä¸‹é¢ä¸€äº›æ–‡ä»¶æ¥è¿›è¡ŒåµŒå…¥å¼€å‘</p>
<ul>
<li><p>å¿«ç…§æ–‡ä»¶ï¼Œç”¨äºåŠ å¿«åˆ›å»º Javascript å¼•æ“</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">natives_blob.bin</span><br><span class="line">snapshot_blob.bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>é™æ€åº“ï¼Œä½äº out.gn/x64.release/obj ç›®å½•ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">libv8_base.a</span><br><span class="line">libv8_external_snapshot.a</span><br><span class="line">libv8_init.a</span><br><span class="line">libv8_initializers.a</span><br><span class="line">libv8_libbase.a</span><br><span class="line">libv8_libplatform.a</span><br><span class="line">libv8_libsampler.a</span><br><span class="line">libv8_nosnapshot.a</span><br></pre></td></tr></table></figure>
</li>
<li><p>icu é™æ€åº“ï¼Œout.gn/x64.release/obj/third_party/icu ç›®å½•ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">libicui18n.a</span><br><span class="line">libicuuc.a</span><br></pre></td></tr></table></figure>
</li>
<li><p>è°ƒè¯•åº“ï¼Œout.gn/x64.release/obj/src/inspector ç›®å½•ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libinspector.a</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<p>ä¸Šé¢çš„æµç¨‹ä¸­ï¼Œä»»æ„ä¸€æ¡å‘½ä»¤æ‰§è¡Œæœ‰è¯¯ï¼Œéƒ½æœ‰å¯èƒ½ä¼šå¯¼è‡´æœ€ç»ˆç¼–è¯‘å¤±è´¥ï¼Œæˆ‘ä»¬è¦æ³¨æ„æ¯ä¸€æ¡å‘½ä»¤çš„è¾“å‡ºä¿¡æ¯ã€‚</p>
<p>æˆ‘åœ¨ç¬¬ä¸ƒæ­¥  <code>tools/dev/v8gen.py x64.release</code> æ—¶å‘ç”Ÿè¿‡é”™è¯¯ï¼Œä½¿ç”¨ <code>-vv</code>  æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯ï¼Œå‘ç°æ˜¯ç³»ç»Ÿæ²¡æœ‰å®‰è£…  pkg-config å¯¼è‡´çš„ï¼Œ<code>brew install pkg-config</code> åè§£å†³é—®é¢˜ã€‚</p>
</div><div class="tags"><a href="/tags/v8/">v8</a></div><div class="post-nav"><a class="pre" href="/2018/10/15/k8s-authentication/">è®¿é—® Kubernetes API - Authenticationï¼ˆä¸€ï¼‰</a><a class="next" href="/2018/06/14/prometheus/">åŸºäº Prometheus çš„ç›‘æ§å®è·µ</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®ºï¼ˆè¯·ç¡®ä¿ Disqus å¯ä»¥æ­£å¸¸åŠ è½½ï¼‰</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://localhost:4000/2018/09/04/v8-build/';
    this.page.identifier = '2018/09/04/v8-build/';
    this.page.title = 'Google v8 æºç ç¼–è¯‘';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//daivd.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//daivd.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://daivd.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://localhost:4000"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/Golang/" style="font-size: 15px;">Golang</a> <a href="/tags/Kubernetes/" style="font-size: 15px;">Kubernetes</a> <a href="/tags/Helm/" style="font-size: 15px;">Helm</a> <a href="/tags/Prometheus/" style="font-size: 15px;">Prometheus</a> <a href="/tags/v8/" style="font-size: 15px;">v8</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/01/17/go-sudog/">Golang æºç é˜…è¯» - ç­‰å¾…é˜Ÿåˆ—</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/16/go-sync/">Golang æºç é˜…è¯» - sync</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/02/go-timer/">Golang æºç é˜…è¯» - timer</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/20/go-netpoll/">Golang æºç é˜…è¯» - netpoll</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/14/go-context/">Golang æºç é˜…è¯» - context</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/21/go-unsafe/">Golang æºç é˜…è¯» - unsafe</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/17/go-reflect/">Golang æºç é˜…è¯» - reflect</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/17/go-range/">Golang æºç é˜…è¯» - for range</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/17/go-interface/">Golang æºç é˜…è¯» - interface</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/27/go-select/">Golang æºç é˜…è¯» - channel</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><script type="text/javascript" src="//daivd.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2020 <a href="/." rel="nofollow">Ruiyuan Wang.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>